import{H as z,j as r,o as g,d as e,J as D,r as M,i as k,a as B,U as K,B as F,f as X,R as U,u as G,b as _,h as T,K as J,C as L,M as Y,O as Z,S as ee,P as te,Q as se,T as q,V as ce,W as ae,X as ne,k as N,Y as oe,Z as re,_ as w,$ as ie,a0 as le,a1 as _e,s as de,a2 as ue,a3 as fe,D as pe,a4 as me,a5 as he,a6 as ve,a7 as be}from"./index-3cb84ae0.js";const $e="_container_1m6tu_107",xe="_fieldWrapper_1m6tu_114",Ae="_fieldLabel_1m6tu_118",Ne="_fieldErrorText_1m6tu_134",ge="_input_1m6tu_150",Ee="_Account_1m6tu_180",Le={container:$e,fieldWrapper:xe,fieldLabel:Ae,fieldErrorText:Ne,input:ge,Account:Ee},ye="_container_1e22d_107",Se="_fieldWrapper_1e22d_114",Te="_fieldLabel_1e22d_118",We="_fieldErrorText_1e22d_134",Ie="_input_1e22d_150",qe="_AccountBody_1e22d_180",De="_header_1e22d_183",Me="_about_1e22d_186",A={container:ye,fieldWrapper:Se,fieldLabel:Te,fieldErrorText:We,input:Ie,AccountBody:qe,header:De,about:Me},ke="_container_2c7cy_107",Be="_fieldWrapper_2c7cy_114",Fe="_fieldLabel_2c7cy_118",Ue="_fieldErrorText_2c7cy_134",we="_input_2c7cy_150",Qe="_AccountInfo_2c7cy_180",Re="_title_2c7cy_188",Ce="_birthDate_2c7cy_204",je="_classNum_2c7cy_207",He="_rating_2c7cy_210",Ve="_AccountSchool_2c7cy_213",Oe="_school_2c7cy_216",v={container:ke,fieldWrapper:Be,fieldLabel:Fe,fieldErrorText:Ue,input:we,AccountInfo:Qe,title:Re,birthDate:Ce,classNum:je,rating:He,AccountSchool:Ve,school:Oe},Pe=({accountData:t,className:s})=>{const{class:i,birthDate:o,rating:c,school:a}=t;let n=null;return console.log("birthDate",o),o&&(n=z(new Date().getTime())),r("ul",{className:g(v.AccountInfo,s),children:[e("h3",{className:v.title,children:"Деталі"}),e("li",{className:v.classNum,children:r("p",{children:[i," клас"]})}),o&&e("li",{className:v.birthDate,children:e("span",{children:n})}),e("li",{className:v.rating,children:e("p",{children:c})}),e("li",{className:v.AccountSchool,children:e(D,{to:a.website,title:"Сайт школи",target:"_blank",className:v.school,children:a.institution_name})})]})},ze="_container_1c63k_107",Ke="_fieldWrapper_1c63k_114",Xe="_fieldLabel_1c63k_118",Ge="_fieldErrorText_1c63k_134",Je="_input_1c63k_150",Ye="_AccountHeader_1c63k_180",Ze="_cover_1c63k_183",et="_fullName_1c63k_190",tt="_editBtn_1c63k_214",st="_icon_1c63k_219",ct="_avatar_1c63k_224",x={container:ze,fieldWrapper:Ke,fieldLabel:Xe,fieldErrorText:Ge,input:Je,AccountHeader:Ye,cover:Ze,fullName:et,editBtn:tt,icon:st,avatar:ct};var W={},at=k;Object.defineProperty(W,"__esModule",{value:!0});var Q=W.default=void 0,nt=at(M()),ot=B,rt=(0,nt.default)((0,ot.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");Q=W.default=rt;const it=({className:t,fullName:s,avatarUrl:i,setIsEditing:o,isMy:c})=>{const a=()=>{o(!0)};return r("div",{className:g(x.AccountHeader,t),children:[r("div",{className:x.cover,children:[c&&e("button",{className:x.editBtn,onClick:a,children:e(Q,{className:x.icon})}),e("h1",{className:x.fullName,children:s})]}),e(K,{className:x.avatar,src:i,fullName:s,size:"lg"})]})},lt="_container_ihipu_107",_t="_fieldWrapper_ihipu_114",dt="_fieldLabel_ihipu_118",ut="_fieldErrorText_ihipu_134",ft="_input_ihipu_150",pt="_MessageBtn_ihipu_180",mt="_btn_ihipu_180",ht="_link_ihipu_180",y={container:lt,fieldWrapper:_t,fieldLabel:dt,fieldErrorText:ut,input:ft,MessageBtn:pt,btn:mt,link:ht},vt=({className:t,uid:s})=>e("div",{className:g(y.MessageBtn,t),children:e(F,{color:"primary",variant:"outlined",startDecorator:e(X,{}),className:y.btn,children:e(D,{className:y.link,to:`/chat/${s}`,children:"Написати повідомлення"})})}),bt=U.memo(({accountData:t,isMy:s,setIsEditing:i})=>{const{aboutMe:o,avatarUrl:c,uid:a,fullName:n}=t;return r("div",{className:A.AccountBody,children:[e(it,{avatarUrl:c,setIsEditing:i,fullName:n,isMy:s,className:A.header}),e("p",{className:A.about,children:o}),!s&&e(vt,{uid:a,className:A.messageBtn}),e(Pe,{accountData:t,className:A.info})]})}),$t="_container_e4fx0_108",xt="_fieldWrapper_e4fx0_115",At="_fieldLabel_e4fx0_119",Nt="_fieldErrorText_e4fx0_135",gt="_input_e4fx0_151",Et="_formWrapper_e4fx0_181",Lt="_form_e4fx0_181",yt="_title_e4fx0_193",St="_body_e4fx0_213",Tt="_avatar_e4fx0_224",Wt="_textFields_e4fx0_232",It="_top_e4fx0_235",qt="_initialsInputs_e4fx0_244",Dt="_avatarUpload_e4fx0_247",Mt="_aboutMe_e4fx0_253",kt="_schoolInfo_e4fx0_257",Bt="_selectSchool_e4fx0_257",p={container:$t,fieldWrapper:xt,fieldLabel:At,fieldErrorText:Nt,input:gt,formWrapper:Et,form:Lt,title:yt,body:St,avatar:Tt,textFields:Wt,top:It,initialsInputs:qt,avatarUpload:Dt,aboutMe:Mt,schoolInfo:kt,selectSchool:Bt},Ft=U.memo(({accountData:t,setIsEdit:s})=>{const{register:i,handleSubmit:o,watch:c,formState:{errors:a},control:n,setValue:d}=G(),[l,h]=_.useState(!1),[b,E]=_.useState(null),{birthDate:ls,name:C,surname:j,school:_s}=t||{},H=T(),V=async u=>{console.log("send data",t),h(!0),await H(ae(u)),console.log("sended"),h(!1),s(!1)};return _.useEffect(()=>{d("avatar",b)},[b]),e("div",{className:p.formWrapper,children:r("form",{className:p.form,onSubmit:o(V),children:[e("h2",{className:p.title,children:"Змінити дані профілю"}),r("div",{className:p.body,children:[r("div",{className:p.top,children:[e("div",{className:p.avatar,children:e(J,{selectedFile:b,setSelectedFile:E,name:C,surname:j,size:96,existingAvatarUrl:t.avatarUrl||void 0})}),r("div",{className:p.textFields,children:[e(L,{control:n,name:"schoolInfo",rules:{required:"Це поле є обов'язковим",min:{value:1,message:"Тоді Ви ще не ходите в школу(1-12)"},max:{value:12,message:"Певно, Ви вже закінчили школу(1-12)"}},defaultValue:{label:t.school.institution_name,id:+t.school.institution_id},render:({field:{value:u}})=>{var $,f;return r(Y,{error:!!a.schoolInfo,required:!0,children:[e(Z,{children:"Навчальний заклад"}),e(ee,{error:($=a.schoolInfo)==null?void 0:$.message,setValue:(O,P)=>{d(O,P)},value:u,inputValue:u.label}),e(te,{children:(f=a.schoolInfo)==null?void 0:f.message})]})}}),e(L,{control:n,name:"class",defaultValue:t.class,render:({field:{value:u,onChange:$}})=>{var f;return e(se,{error:(f=a.class)==null?void 0:f.message,onChange:$,value:u,required:!0})}})]})]}),e(L,{control:n,name:"aboutMe",defaultValue:t.aboutMe||"",rules:{maxLength:{value:q,message:`Повинно бути менше ${q} символів`}},render:({field:{value:u,onChange:$}})=>{var f;return e(ce,{error:(f=a.aboutMe)==null?void 0:f.message,onChange:$,value:u})}})]}),e(F,{className:p.submitBtn,type:"submit",children:"Зберегти"})]})})}),Ut="_container_13m56_107",wt="_fieldWrapper_13m56_114",Qt="_fieldLabel_13m56_118",Rt="_fieldErrorText_13m56_134",Ct="_input_13m56_150",jt="_NoAccountData_13m56_180",Ht="_icon_13m56_188",Vt="_text_13m56_193",S={container:Ut,fieldWrapper:wt,fieldLabel:Qt,fieldErrorText:Rt,input:Ct,NoAccountData:jt,icon:Ht,text:Vt},Ot=()=>r("div",{className:S.NoAccountData,children:[e(ne,{className:S.icon}),e("span",{className:S.text,children:"Користувач ще не вніс свої дані"})]}),Pt="_container_5vq3c_107",zt="_fieldWrapper_5vq3c_114",Kt="_fieldLabel_5vq3c_118",Xt="_fieldErrorText_5vq3c_134",Gt="_input_5vq3c_150",Jt="_AccountQuestions_5vq3c_180",Yt="_top_5vq3c_183",Zt="_title_5vq3c_190",es="__open_5vq3c_205",ts="_arrow_5vq3c_205",ss="_questionsList_5vq3c_213",m={container:Pt,fieldWrapper:zt,fieldLabel:Kt,fieldErrorText:Xt,input:Gt,AccountQuestions:Jt,top:Yt,title:Zt,_open:es,arrow:ts,questionsList:ss};var I={},cs=k;Object.defineProperty(I,"__esModule",{value:!0});var R=I.default=void 0,as=cs(M()),ns=B,os=(0,as.default)((0,ns.jsx)("path",{d:"M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41 0L6.7 10.7a.9959.9959 0 0 1 0-1.41c.39-.38 1.03-.39 1.42 0z"}),"KeyboardArrowDownRounded");R=I.default=os;const rs=({uid:t})=>{const s=N(oe),[i,o]=_.useState(!1),[c,a]=_.useState(!1),n=_.useRef(null),d=T();return _.useEffect(()=>{s||(async()=>{o(!0),await d(_e(t)),o(!1)})()},[c]),_.useEffect(()=>()=>{d(re(null))},[]),console.log("condition",c&&!i&&n.current),r("div",{className:m.AccountQuestions,children:[r("button",{className:g(m.top,c&&m._open),onClick:()=>a(l=>!l),children:[r("h2",{className:m.title,children:["Запитання ",s&&`(${s.length})`]}),e(R,{className:m.arrow})]}),e("div",{className:g(m.questionsList,c&&m._open),ref:n,children:i?e(w,{}):s?s.map(l=>e(ie,{data:l,isOpen:!1},l.id)):e("p",{className:m.noQuestions,children:"Немає запитань"})}),c&&!i&&n.current&&e(le,{element:n.current,up:!0})]})},is=({})=>{const[t,s]=_.useState(!0),[i,o]=_.useState(!1),c=N(de),a=N(ue),n=N(fe),d=N(pe),{userId:l}=me(),h=l?a:c,b=!l;_.useEffect(()=>{s(!0),l&&E(he(l)),s(!1)},[l]),console.log("axxoun data",h);const E=T();return console.log("is fetching",n),d?n&&t||!c?e(w,{}):e("div",{className:Le.Account,children:!i&&h?r(be,{children:[e(bt,{accountData:h,setIsEditing:o,isMy:b}),e(rs,{uid:h.uid})]}):b?e(Ft,{accountData:c,setIsEdit:o}):e(Ot,{})}):e(ve,{to:"/login",replace:!0})},us=is;export{us as default};
