import{r as N,i as S,a as W,u as T,b as l,c as m,j as p,d as e,C as j,A as I,I as D,e as q,f as G,G as U,g as A,h as O,k as h,s as R,l as B,m as M,n as k,o as w}from"./index-3cb84ae0.js";const V="_container_1rhou_107",z="_fieldWrapper_1rhou_114",P="_fieldLabel_1rhou_118",Q="_fieldErrorText_1rhou_134",F="_input_1rhou_150",H={container:V,fieldWrapper:z,fieldLabel:P,fieldErrorText:Q,input:F},J="_container_1ijn7_107",K="_fieldWrapper_1ijn7_114",X="_fieldLabel_1ijn7_118",Y="_fieldErrorText_1ijn7_134",Z="_input_1ijn7_150",ee="_UsersSearch_1ijn7_180",te="_title_1ijn7_183",s={container:J,fieldWrapper:K,fieldLabel:X,fieldErrorText:Y,input:Z,UsersSearch:ee,title:te};var v={},ae=S;Object.defineProperty(v,"__esModule",{value:!0});var $=v.default=void 0,ne=ae(N()),re=W,se=(0,ne.default)((0,re.jsx)("path",{d:"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchRounded");$=v.default=se;const oe=({})=>{const{control:t,watch:a,handleSubmit:o}=T(),[c,u]=l.useState(!1),[b,g]=l.useState([]),[_,x]=l.useState(""),y=m(),E=(r,i)=>{x(i)},L=r=>{console.log("submit"),C(r.query)},C=async r=>{if(r){u(!0);const i=await q.getUsersByQuery(r);u(!1),i&&g(i.map(n=>({fullName:n.fullName,uid:n.uid})))}};return l.useEffect(()=>{console.log("query changed"),_&&C(_)},[_]),p("div",{className:s.UsersSearch,children:[e("h3",{className:s.title,children:"Знайдіть нових співрозмовників"}),e("form",{className:s.form,onSubmit:o(L),children:e(j,{control:t,name:"query",render:({field:{value:r,onChange:i}})=>e(I,{options:b,className:s.input,inputValue:_,freeSolo:!0,loading:c,loadingText:"Пошук...",isOptionEqualToValue:(n,f)=>n.fullName===f.fullName,getOptionLabel:n=>n.fullName,onChange:(n,f)=>{y(`/account/${f.uid}`)},onInputChange:E,placeholder:"І'мя та прізвище",endDecorator:e(D,{className:s.iconBtn,type:"submit",children:e($,{className:s.icon})})})})})]})},ie="_container_1rhou_107",le="_fieldWrapper_1rhou_114",ce="_fieldLabel_1rhou_118",ue="_fieldErrorText_1rhou_134",_e="_input_1rhou_150",de={container:ie,fieldWrapper:le,fieldLabel:ce,fieldErrorText:ue,input:_e},pe="_container_1vye9_107",fe="_fieldWrapper_1vye9_114",he="_fieldLabel_1vye9_118",me="_fieldErrorText_1vye9_134",ve="_input_1vye9_150",Ce="_GeneralChatCard_1vye9_180",$e="_iconWrap_1vye9_190",be="_icon_1vye9_190",ge="_title_1vye9_202",d={container:pe,fieldWrapper:fe,fieldLabel:he,fieldErrorText:me,input:ve,GeneralChatCard:Ce,iconWrap:$e,icon:be,title:ge},xe=({})=>{const t=m(),a=()=>{t(`/chats/${U}`,{replace:!0})};return p("button",{className:d.GeneralChatCard,onClick:a,children:[e("div",{className:d.iconWrap,children:e(G,{classes:d.icon})}),e("h3",{className:d.title,children:"Загальний чат"})]})},ye=({chatsData:t})=>p("div",{className:de.ChatsList,children:[t.map(a=>e(A,{data:a},a.contactId)),e(xe,{})]}),Ee=({})=>{const t=m(),a=O(),o=h(R),c=h(B),u=h(M);return l.useEffect(()=>{a(k())},[o==null?void 0:o.uid]),u||t("/login",{replace:!0}),p("div",{className:w(H.Chats,"container"),children:[e(oe,{}),c?e(ye,{chatsData:c}):e("p",{children:"Немає розмов"})]})},Ne=Ee;export{Ne as default};
